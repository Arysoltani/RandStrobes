---
title: "R Notebook"
output: html_notebook
---


```{r}
library(ggplot2)
all_files <- list.files(path = "../EvaluationResults/MedianSamples")
cnt <- 1
for(file_now in all_files)
{
  path_now = paste("../EvaluationResults/MedianSamples/", file_now, sep = "")
  print(path_now)
  new_csv <- read.csv(path_now)
  if(cnt == 1)
  {
    data_all_methods <- new_csv
  }else
  {
    data_all_methods <- rbind(data_all_methods, new_csv)
  }
  cnt <- cnt + 1
}
deleted <- c('HashMethod', 'RandStrobeMethod')
new_data <- data_all_methods
new_data$Sample <- NULL
new_data$RandStrobeMethod <- NULL
new_data$HashMethod <- NULL
for(i in 1:ncol(new_data))
{
  col_now <- data_all_methods[, names(new_data)[i]]
  sorted_data <- data_all_methods[order(col_now), ]
  file_name <- paste("../EvaluationResults/MetricsSortedByMethods/", names(new_data)[i], ".csv",sep = "")
  sorted_data <- sorted_data[, c('HashMethod', 'RandStrobeMethod', names(new_data)[i])]
  write.csv(sorted_data, file_name, row.names = FALSE)
  #print(names(new_data)[i])
  plot_now <- ggplot(data_all_methods,
         aes(fill = RandStrobeMethod, y = new_data[, i], x = HashMethod)
         ) + geom_bar(position="dodge", stat="identity")
  added_str <- "based on hashes and linkings"
  if(names(new_data)[i] == "E.hits.Unique.Strobmers" || names(new_data)[i]  == "Unique.Strobmers")
    added_str <- "based on final seed hash values"
  plot_now <- plot_now + labs(title = paste(names(new_data)[i], added_str),
              x = "Hashes", y =  names(new_data)[i])
  print(paste("../EvaluationResults/Figures/", names(new_data)[i], ".png",sep = ""))
  png(filename=paste("../EvaluationResults/Figures/", names(new_data)[i], ".png",sep = ""), width=1200, height=1200)
  print(plot_now)
  dev.off()
  pdf(file=paste("../EvaluationResults/Figures/", names(new_data)[i], ".pdf",sep = ""))
  print(plot_now)
  dev.off()
}
  #row.names(data_all_methods) <- data_all_methods$RandStrobeMethod
#print(data_all_methods)
```
